<app-navbar></app-navbar>
<div class="container pb-3" style="font-family: 'Patua One', cursive;">

  <div>
    <h2 class="mt-3" style="font-family: 'Fredericka the Great', cursive;">What are you going to be?</h2>
    <p class="text-muted" style="font-family: 'Special Elite', cursive;">Your characterâ€™s class is their profession or vocation determining: combat prowess, magical ability, skills, and more...</p>
  </div>

  <div class="d-flex">

    <div class="d-inline-flex w-50 mb-3 pr-1">
      <div class="flex-fill">
        <label for="typeahead-focus">Class:</label>
        <input
          class="form-control input"
          type="text"
          id="typeahead-focus"
          placeholder="What is your character class?"
          [(ngModel)]="typeAheadClass"
          [ngbTypeahead]="search"
          [resultTemplate]="rt"
          [resultFormatter]="formatMatches"
          [inputFormatter]="formatMatches"
          (focus)="focus$.next($event.target.value)"
          (click)="click$.next($event.target.value)"
          (selectItem)="setSelectedClass($event.item)"
          #instance="ngbTypeahead"
        />
        <ng-template #rt let-r="result" let-t="term">
          <img [src]="r['icon']" class="mr-2" style="width: 1.5em">
          <ngb-highlight [result]="r.name" [term]="t"></ngb-highlight>
        </ng-template>
      </div>
    </div>

    <div class="w-100 pl-1">

      <div class="d-inline-flex w-25 pr-1">
        <div class="flex-fill">
          <div class="form-group" *ngIf="characterService.tempCharacter.alignment !== null; else showSelectAlignmentBtn">
            <label for="alignment">Alignment:</label>
            <button class="d-inline-flex align-items-center btn btn-outline-info btn-sm ml-1 py-0"
                    title="Select your characters alignment."
                    (click)="openSelectAlignmentModal()">
              <i class="fas fa-undo"></i><span class="small ml-1">Change</span>
            </button>
            <div class="d-flex">
              <div class="flex-fill">
                <input type="text" class="form-control" id="alignment"
                       [value]="characterService.tempCharacter.alignment"
                       readonly required>
              </div>
            </div>
          </div>
          <ng-template #showSelectAlignmentBtn>
            <div class="form-group">
              <label for="alignment">Alignment:</label>
              <button class="btn btn-block" [ngClass]=" characterService.tempCharacter.alignment === null ? 'btn-primary' : '' "
                      (click)="openSelectAlignmentModal()">
                Select Alignment <i class="fas fa-balance-scale"></i>
              </button>
            </div>
          </ng-template>
        </div>
      </div>

      <div class="d-inline-flex w-75 pl-1">
        <div class="flex-fill">
          <div class="form-group" *ngIf="characterService.tempCharacter.religion.length !== 0; else showSelectReligionBtn">
            <label for="alignment">Religion:</label>
            <button class="d-inline-flex align-items-center btn btn-outline-info btn-sm ml-1 py-0"
                    title="Select your characters Religion or Patron Deity."
                    (click)="openSelectReligionModal()">
              <i class="fas fa-undo"></i><span class="small ml-1">Change Religion</span>
            </button>
            <div class="d-flex">
              <div class="flex-fill">
                <input type="text" class="form-control" id="religion"
                       [value]="getReligionText()"
                       readonly required>
              </div>
            </div>
          </div>
          <ng-template #showSelectReligionBtn>
            <div class="form-group">
              <label for="alignment">Religion:</label>
              <button class="btn btn-block" [ngClass]=" characterService.tempCharacter.alignment === null ? 'btn-secondary'
                                                        : characterService.tempCharacter.religion.length === 0 ? 'btn-primary'
                                                        : '' "
                      (click)="openSelectReligionModal()">
                Select Religion(s) <i class="fas fa-church"></i>
              </button>
            </div>
          </ng-template>
        </div>
      </div>

    </div>

  </div>

  <div class="d-flex d-block">

    <div class="d-inline-flex w-25">
      <div class="mr-2">
        <div class="form-group">
          <label for="heightFeet">Height:</label>
          <button class="d-inline-flex align-items-center btn btn-outline-info btn-sm ml-1 py-0"
                  title="Generate a random character aged based on the selected race."
                  (click)="generateNewRandomHeight()">
            <i class="fas fa-random"></i><span class="small ml-1">Random</span>
          </button>
          <div class="d-flex">
            <div class="d-inline-flex w-50 mr-1">
              <div class="input-group">
              <input type="number" class="form-control text-right" id="heightFeet" min="0"
                     [(ngModel)]="characterService.tempCharacter.height.feet" title="Feet" required>
                <div class="input-group-append">
                  <span class="input-group-text">&apos;</span>
                </div>
              </div>
            </div>
            <div class="d-inline-flex w-50 ml-1">
              <div class="input-group">
                <input type="number" class="form-control text-right" id="heightInches" [min]="heightInchesMin" max="12"
                       [(ngModel)]="characterService.tempCharacter.height.inches"
                       (ngModelChange)="heightInchesChanged()" title="Inches" required>
                <div class="input-group-append">
                  <span class="input-group-text">&quot;</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-inline-flex w-25">
      <div class="mr-2">
        <div class="form-group">
          <label for="weight">Weight:</label>
          <button class="d-inline-flex align-items-center btn btn-outline-info btn-sm ml-1 py-0"
                  title="Generate a random character aged based on the selected race."
                  (click)="generateNewRandomWeight()">
            <i class="fas fa-random"></i><span class="small ml-1">Random</span>
          </button>
          <div class="d-inline-flex w-100">
            <div class="input-group">
              <input type="number" class="form-control text-right" id="weight" min="0" max="999999"
                     [(ngModel)]="characterService.tempCharacter.weight" title="Pounds" required>
              <div class="input-group-append">
                <span class="input-group-text">lbs.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="d-inline-flex w-25">
      <div class="mr-2">
        <div class="form-group">
          <label for="age">Age:</label>
          <button class="d-inline-flex align-items-center btn btn-outline-info btn-sm ml-1 py-0"
                  title="Generate a random character aged based on the selected race."
                  (click)="generateRandomAge(4, 6)">
            <i class="fas fa-random"></i><span class="small ml-1">Random</span>
          </button>
          <div class="d-inline-flex w-100">
            <div class="input-group">
              <input type="number" class="form-control text-right" id="age" min="0" max="999999"
                     [(ngModel)]="characterService.tempCharacter.age" title="Age" required>
              <div class="input-group-append">
                <span class="input-group-text">Years</span>
              </div>
            </div>
          </div>
        </div>
        <span class="d-block text-warning small ml-1" style="font-family: 'Roboto', sans-serif;">{{ ageCategory }}</span>
      </div>
    </div>

    <div class="d-inline-flex w-25">
      <div class="mr-2 w-50">
        <div class="form-group">
          <label class="" for="hitPoints">HP:</label>
          <div class="">
            <input type="text" class="form-control text-center bg-white" id="hitPoints" min="0" max="999"
                   [value]="this.selectedClass !== undefined ? characterService.tempCharacter.hitPoints : '-'"
                   title="Hit Points" required disabled>
          </div>
        </div>
      </div>
      <div class="mr-2 w-50">
        <div class="">
          <label class="" for="hitDie">Hit Die:</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">d</span>
            </div>
            <input type="text" class="form-control text-center bg-light" id="hitDie" min="4" max="12"
                   [value]="this.selectedClass !== undefined ? characterService.tempCharacter.hitDie[0].hitDie : '-'"
                   title="HitDie" required disabled>
          </div>
        </div>
      </div>
    </div>

  </div>

  <pre>{{ character | json }}</pre>

</div>
